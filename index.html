<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather</title>
    <link rel="stylesheet" href="./style.css" />
</head>
<body>
    <div class="main">
        <div id="header">
            <h1>Weather</h1>
            <input type="text" class="city" placeholder="Enter a country Name" />
            <button onclick="weather()">Search</button>
        </div>
        <div id="data">
            <div id="div1">
                <p class="countryname"></p>
                <p class="temp"></p>
                <p class="haze"></p>
                <p class="feelslike"></p>
            </div>
            <div id="div2">
                <p class="humidity"></p>
                <p class="wind"></p>
                <p class="pressure"></p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <script>

        function weather() {
            let cityName = document.querySelector(".city").value;
            let temp = document.querySelector(".temp");
            let humidity = document.querySelector(".humidity");
            let wind = document.querySelector(".wind");
            let pressure = document.querySelector(".pressure");
            let feelsLike = document.querySelector(".feelslike");
            let countryName = document.querySelector(".countryname");
            let haze = document.querySelector(".haze");

            axios
                .get(
                    `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=1bb1a234b66e41684dbff4a9d98a2d1b&units=metric`
                )
                .then(function (response) {
                    console.log(response);

                    // Country Name
                    countryName.innerHTML = `${response.data.name}, ${response.data.sys.country}`;

                    // Weather Description
                    const { description } = response.data.weather[0];
                    haze.innerHTML = `${description}`;

                    // Temperature
                    let temperatureValue = Math.round(response.data.main.temp);
                    temp.innerHTML = `${temperatureValue}°C`;

                    // Humidity
                    humidity.innerHTML = `Humidity: ${response.data.main.humidity}%`;

                    // Wind Speed (Convert m/s to km/h)
                    let kms = Math.round(response.data.wind.speed * 3600 / 1000);
                    wind.innerHTML = `Wind: ${kms} km/h`;

                    // Pressure
                    pressure.innerHTML = `Pressure: ${response.data.main.pressure} mb`;

                    // Feels Like Temperature
                    let mahsooKaroo = Math.round(response.data.main.feels_like);
                    feelsLike.innerHTML = `Feels like: ${mahsooKaroo}°C`;
                })
                .catch(function (error) {
                    console.error("Error fetching weather:", error);
                });
        }

    </script>
</body>
</html>
